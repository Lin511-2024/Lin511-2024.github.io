{
  "hash": "c84d589820dd3871e3761f0611007bc5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ngrams\"\nsubtitle: \"-or- What if we *could* parse natural language with a finite state automaton?\"\ndate: 2024-02-13\nfilters: \n  - codeblocklabel\nknitr:\n  opts_chunk: \n    warning: false\n    message: false\n    echo: false\nbibliography: references.bib\ncategories:\n  - compling\n---\n\n\nSo, in our notes on [finite state automata](01_fsm.qmd) and [push-down automata](02_pda.qmd) we concluded that since natural language has bracket matching patterns, and maybe even crossing dependencies, that it's more complex than a \"regular\" language, and can't really be parsed with a finite state automaton.\n\nngram language modelling asks the question: But what if we tried really hard?\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n## States and Words\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nThe first sentence of Moby Dick is, famously,\n\n> Call me Ishmael.\n\nWe could try representing this as a finite state automaton like so:\n\n\n```{mermaid}\nstateDiagram\n\tdirection LR\n\n\t[*] --> call: call\n\tcall --> me: me\n\tme --> ishmael: ishmael\n\tishmael --> [*]\n```\n\n\nBut, this is *far* from a complete model of the whole book *Moby Dick*. It would only work if the entire book was just \"Call me Ishmael\" over and over again.\n\nTo enrich the FSA, we could add all of the other words that could follow *\"call\".*\n\n\n```{mermaid}\nstateDiagram\n\tdirection LR\n\n\t[*] --> call: call\n\tcall --> call: call\n\tcall --> it: it\n\tcall --> a: a\n\tcall --> me: me\n\tcall --> him: him\n\tcall --> ...\n\tcall --> [*]\n\n\tme --> ishmael: ishmael\n\tme --> call: call\n\n\tishmael --> [*]\n```\n\n\nBut, lots of other words could *also* follow *\"me\"*. And more words could also follow *\"Ishmael\"*\n\n\n```{mermaid}\nstateDiagram\n\tdirection LR\n\n\t[*] --> call: call\n\tcall --> call: call\n\tcall --> it: it\n\tcall --> a: a\n\tcall --> me: me\n\tcall --> him: him\n\tcall --> ...\n\tcall --> [*]\n\n\tme --> me: me\n\tme --> call: call\n\tme --> that: that\n\tme --> and: and\n\tme --> ishmael: ishmael\n\tme --> to: to\n\tme --> ...\n\tme --> [*]\n\n\tishmael --> ishmael: ishmael\n\tishmael --> me: me\n\tishmael --> can: can\n\tishmael --> said: said\n\tishmael --> ...\n\tishmael --> [*]\n```\n\n\nIf we fully fleshed out this diagram with *all*[^1] of words in *Moby Dick*, it would look like this\n\n[^1]: well, *almost* all.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Bigram network for Moby Dick, where $C(w_1, w_2)\\ge 5$](04_ngrams_files/figure-html/fig-moby_dick_network-1.png){#fig-moby_dick_network fig-align='center' width=80%}\n:::\n:::\n\n\n### \\*grams\n\nThe \"model\" of word sequences is called an \"ngram\" model or more specifically a \"bigram\" model.\n\n| Words in the current state | Words in input | Total Words | Name    |\n|----------------------------|----------------|-------------|---------|\n| 1                          | 1              | 2           | bigram  |\n| 2                          | 1              | 3           | trigram |\n| 3                          | 1              | 4           | 4-gram  |\n| 4                          | 1              | 5           | 5-gram  |\n|                            |                |             | etc     |\n\n: How we name \\*gram models\n\nWe can expand the context of the bigram model to a trigram model, which would look something like this\n\n\n```{mermaid}\nstateDiagram\n  direction LR\n  \n  state \"_ call\" as _c\n  state \"call me\" as cm\n  state \"me Ishmael\" as mi\n  \n  [*] --> _\n  _ --> _c: call\n  _c --> cm: me\n  cm --> mi: Ishmael\n  mi --> [*]\n  \n```\n\n\nBut, again, even for this small vocabulary, this *total* number of states is incomplete. If we wired up *all* of the logical transitions they'd look like this [ilithid](https://en.wikipedia.org/wiki/Illithid) monstrosity.\n\n\n```{mermaid}\nstateDiagram\n\tdirection LR\n\n\tstate \"_ call\" as _c\n\tstate \"_ me\" as _m\n\tstate \"_ Ishmael\" as _i\n\t\n\tstate \"call me\" as cm\n\tstate \"call call\" as cc\n\tstate \"call Ishmael\" as ci\n\n\tstate \"me Ishmael\" as mi\n\tstate \"me call\" as mc\n\tstate \"me me\" as mm\n\n\tstate \"Ishmael call\" as ic\n\tstate \"Ishmael Ishmael\" as ii\n\tstate \"Ishmael me\" as im\n\n\t[*] --> _: _\n\t_ --> _m: me\n\t_ --> _c: call\n\t_ --> _i: Ishmael\n\t\n\n\t_c --> cm: me\n\t_c --> cc: call\n\t_c --> ci: Ishmael\n\n\tcc --> cc: call\n\tcc --> ci: Ishmael\n\tcc --> cm: me\n\n\tci --> ii: Ishmael\n\tci --> im: me\n\tci --> ic: call\n\n\tcm --> mi: Ishmael\n\tcm --> mm: me\n\tcm --> mc: call\n\n\t_m --> mc: call\n\t_m --> mm: me\n\t_m --> mi: Ishmael\n\t\n\tmm --> mm: me\n\tmm --> mc: call\n\tmm --> mi: Ishmael\n\n\tmi --> ii: Ishmael\n\tmi --> ic: call\n\tmi --> im: me\n\n\tmc --> cm: me\n\tmc --> ci: Ishmael\n\tmc --> cc: call\n\n\n\n\t_i --> ic: call\n\t_i --> im: me\n\t_i --> ii: Ishmael\n\n\tic --> cc: call\n\tic --> cm: me\n\tic --> ci: Ishmael\n\n\tim --> mi: Ishmael\n\tim --> mc: call\n\tim --> mm: me\n\n\tii --> im: me\n\tii --> ic: call\n\tii --> ii: Ishmael\n\t\n```\n\n\n### Probabilistic ngrams\n\nBut, if we look at the actual entire book *Moby Dick,* not all of these connections are equally likely.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"bkzbwelblu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#bkzbwelblu table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bkzbwelblu thead, #bkzbwelblu tbody, #bkzbwelblu tfoot, #bkzbwelblu tr, #bkzbwelblu td, #bkzbwelblu th {\n  border-style: none;\n}\n\n#bkzbwelblu p {\n  margin: 0;\n  padding: 0;\n}\n\n#bkzbwelblu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bkzbwelblu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bkzbwelblu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bkzbwelblu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bkzbwelblu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bkzbwelblu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bkzbwelblu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bkzbwelblu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bkzbwelblu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bkzbwelblu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bkzbwelblu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#bkzbwelblu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bkzbwelblu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bkzbwelblu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bkzbwelblu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkzbwelblu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bkzbwelblu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bkzbwelblu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bkzbwelblu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkzbwelblu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bkzbwelblu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkzbwelblu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bkzbwelblu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkzbwelblu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bkzbwelblu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkzbwelblu .gt_left {\n  text-align: left;\n}\n\n#bkzbwelblu .gt_center {\n  text-align: center;\n}\n\n#bkzbwelblu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bkzbwelblu .gt_font_normal {\n  font-weight: normal;\n}\n\n#bkzbwelblu .gt_font_bold {\n  font-weight: bold;\n}\n\n#bkzbwelblu .gt_font_italic {\n  font-style: italic;\n}\n\n#bkzbwelblu .gt_super {\n  font-size: 65%;\n}\n\n#bkzbwelblu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bkzbwelblu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bkzbwelblu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bkzbwelblu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bkzbwelblu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bkzbwelblu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bkzbwelblu .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"next word\">next word</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\" scope=\"colgroup\" id=\"word\">\n        <span class=\"gt_column_spanner\">word</span>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"call\">call</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"me\">me</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"ishmael\">ishmael</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><th id=\"stub_1_1\" scope=\"row\" class=\"gt_row gt_left gt_stub\">call</th>\n<td headers=\"stub_1_1 call\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td>\n<td headers=\"stub_1_1 me\" class=\"gt_row gt_right\" style=\"background-color: #FFEBEE; color: #000000;\">1</td>\n<td headers=\"stub_1_1 ishmael\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td></tr>\n    <tr><th id=\"stub_1_2\" scope=\"row\" class=\"gt_row gt_left gt_stub\">ishmael</th>\n<td headers=\"stub_1_2 call\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td>\n<td headers=\"stub_1_2 me\" class=\"gt_row gt_right\" style=\"background-color: #FFEBEE; color: #000000;\">1</td>\n<td headers=\"stub_1_2 ishmael\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td></tr>\n    <tr><th id=\"stub_1_3\" scope=\"row\" class=\"gt_row gt_left gt_stub\">me</th>\n<td headers=\"stub_1_3 call\" class=\"gt_row gt_right\" style=\"background-color: #B71C1C; color: #FFFFFF;\">3</td>\n<td headers=\"stub_1_3 me\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td>\n<td headers=\"stub_1_3 ishmael\" class=\"gt_row gt_right\" style=\"background-color: #808080; color: #FFFFFF;\">0</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n```{mermaid}\n%% fig-align: center\nflowchart LR\n\tc[\"call\"] ==> m[\"me\"]\n\tm --> c\n\tm --> i[\"Ishmael\"]\n```\n\n\n## Terminology and Notation Moment\n\n### Types vs Tokens\n\n<details>\n\n<summary>A function to get all of the words in Moby Dick</summary>\n\n\n::: {.cell}\n\n```{.python .cell-code  code-summary=\"A function to get all Moby Dick words\"}\nimport re\nimport gutenbergpy.textget\nfrom nltk.tokenize import word_tokenize\n\ndef get_moby_dick_words():\n  raw_book = gutenbergpy.textget.get_text_by_id(2701) # with headers\n  moby_dick_byte = gutenbergpy.textget.strip_headers(raw_book) # without headers\n  moby_dick = moby_dick_byte.decode(\"utf-8\")\n  moby_dick_tokens = word_tokenize(moby_dick)\n  moby_dick_words = [tok for tok in moby_dick_tokens]\n  \n  return moby_dick_words\n```\n:::\n\n\n</details>\n\n::: codebox\n\n::: {.cell}\n\n```{.python .cell-code}\nmoby_dick_words = get_moby_dick_words()\nfor idx, word in enumerate(moby_dick_words[0:20]):\n  print(word, end = \", \")\n  if (idx+1) % 5 == 0:\n     print(\"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMOBY-DICK, ;, or, ,, THE, \nWHALE, ., By, Herman, Melville, \nCONTENTS, ETYMOLOGY, ., EXTRACTS, (, \nSupplied, by, a, Sub-Sub-Librarian, ), \n```\n\n\n:::\n:::\n\n:::\n\nWe can get counts of how often each word appeared in the book with `collections.Counter()` .\n\n::: codebox\n\n::: {.cell}\n\n```{.python .cell-code}\nfrom collections import Counter\n\nword_count = Counter(moby_dick_words)\n```\n:::\n\n:::\n\nLet's compare the length of the full list of words to the length of the word count dictionary.\n\n::: codebox\n\n::: {.cell}\n\n```{.python .cell-code}\nprint(f\"There are {len(moby_dick_words):,} total  words.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThere are 255,958 total  words.\n```\n\n\n:::\n\n```{.python .cell-code}\nprint(f\"There are  {len(word_count):,} unique words.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThere are  21,897 unique words.\n```\n\n\n:::\n:::\n\n:::\n\n::: callout-important\n## Terminology\n\nIn more common corpus/compling terminology, we would say\n\n-   There are 215,300 **tokens** in *Moby Dick*.\n\n-   There are 19,989 **types** in *Moby Dick*.\n:::\n\nWe can get the frequency of the words \"whale\" and \"ogre\" in *Moby Dick* like so:\n\n::: {.callout-note collapse=\"true\"}\n## Indexing with a string?\n\nWe can index `word_count` with the string `\"whale\"` because it is a [\"dictionary\"](../concepts/00_glossary.qmd#dictionary) We could create our own dictionary like this:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfood_type = {\n  \"banana\": \"fruit\",\n  \"strawberry\": \"fruit\",\n  \"carrot\": \"vegetable\",\n  \"onion\": \"vegetable\"\n}\n\nfood_type[\"banana\"]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'fruit'\n```\n\n\n:::\n:::\n\n:::\n\n::: codebox\n\n::: {.cell}\n\n```{.python .cell-code}\nprint(f\"The word 'whale' appeared {word_count['whale']:,} times.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThe word 'whale' appeared 771 times.\n```\n\n\n:::\n\n```{.python .cell-code}\nprint(f\"The word  'ogre' appeared    {word_count['ogre']} times.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nThe word  'ogre' appeared    0 times.\n```\n\n\n:::\n:::\n\n:::\n\n::: callout-important\n## Terminology\n\nThe way we'd describe this in a more corpus/comp-ling way is\n\n> The word **type** \"whale\" appears in *Moby Dick*. There are 1,070 **tokens** of \"whale\" in the book.\n>\n> The word **type** \"ogre\" does not appear in *Moby Dick*.\n:::\n\n### Notation\n\n#### Words and variables\n\n|                  |       |       |         |       |       |       |     |       |\n|------------------|:-----:|:-----:|:-------:|:-----:|:-----:|:-----:|:---:|:-----:|\n| **text**         | Call  |  me   | Ishmael |   .   | Some  | years | ... |       |\n| **math standin** | $w_1$ | $w_2$ |  $w_3$  | $w_4$ | $w_5$ | $w_5$ |     | $w_i$ |\n\n::: callout-note\n## Math Notation\n\n$w_2$\n\n:   Literally the second word in a sequence.\n\n$w_i$\n\n:   The $i$^th^ word in the sequence (that is, any arbitrary word).\n:::\n\n#### Counting Words\n\n\n::: {.cell tbl-cap='Counts of each type in Moby Dick'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"deengjqgbj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#deengjqgbj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#deengjqgbj thead, #deengjqgbj tbody, #deengjqgbj tfoot, #deengjqgbj tr, #deengjqgbj td, #deengjqgbj th {\n  border-style: none;\n}\n\n#deengjqgbj p {\n  margin: 0;\n  padding: 0;\n}\n\n#deengjqgbj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#deengjqgbj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#deengjqgbj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#deengjqgbj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#deengjqgbj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#deengjqgbj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#deengjqgbj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#deengjqgbj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#deengjqgbj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#deengjqgbj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#deengjqgbj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#deengjqgbj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#deengjqgbj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#deengjqgbj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#deengjqgbj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#deengjqgbj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#deengjqgbj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#deengjqgbj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#deengjqgbj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#deengjqgbj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#deengjqgbj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#deengjqgbj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#deengjqgbj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#deengjqgbj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#deengjqgbj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#deengjqgbj .gt_left {\n  text-align: left;\n}\n\n#deengjqgbj .gt_center {\n  text-align: center;\n}\n\n#deengjqgbj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#deengjqgbj .gt_font_normal {\n  font-weight: normal;\n}\n\n#deengjqgbj .gt_font_bold {\n  font-weight: bold;\n}\n\n#deengjqgbj .gt_font_italic {\n  font-style: italic;\n}\n\n#deengjqgbj .gt_super {\n  font-size: 65%;\n}\n\n#deengjqgbj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#deengjqgbj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#deengjqgbj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#deengjqgbj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#deengjqgbj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#deengjqgbj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#deengjqgbj .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"token\">token</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"math\">math</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">Call</td>\n<td headers=\"n\" class=\"gt_row gt_right\">3</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_1) = 3$\"><div class='gt_from_md'><p>\\(C(w_1) = 3\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">me</td>\n<td headers=\"n\" class=\"gt_row gt_right\">607</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_2) = 607$\"><div class='gt_from_md'><p>\\(C(w_2) = 607\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">Ishmael</td>\n<td headers=\"n\" class=\"gt_row gt_right\">18</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_3) = 18$\"><div class='gt_from_md'><p>\\(C(w_3) = 18\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">.</td>\n<td headers=\"n\" class=\"gt_row gt_right\">7164</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_4) = 7164$\"><div class='gt_from_md'><p>\\(C(w_4) = 7164\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">Some</td>\n<td headers=\"n\" class=\"gt_row gt_right\">38</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_5) = 38$\"><div class='gt_from_md'><p>\\(C(w_5) = 38\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_center\">years</td>\n<td headers=\"n\" class=\"gt_row gt_right\">91</td>\n<td headers=\"math\" class=\"gt_row gt_center\"><div data-qmd=\"$C(w_6) = 91$\"><div class='gt_from_md'><p>\\(C(w_6) = 91\\)</p>\n</div></div></td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n::: callout-note\n## Math Notation\n\n$C()$\n\n:   A function for the \"C\"ount of a value.\n\n$C(w_1)$\n\n:   The frequency of the *type* of the first *token*\n\n$C(w_i)$\n\n:   The frequency of an arbitrary type.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lctdrceciv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#lctdrceciv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lctdrceciv thead, #lctdrceciv tbody, #lctdrceciv tfoot, #lctdrceciv tr, #lctdrceciv td, #lctdrceciv th {\n  border-style: none;\n}\n\n#lctdrceciv p {\n  margin: 0;\n  padding: 0;\n}\n\n#lctdrceciv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lctdrceciv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lctdrceciv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lctdrceciv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lctdrceciv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lctdrceciv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lctdrceciv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lctdrceciv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lctdrceciv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lctdrceciv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lctdrceciv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lctdrceciv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lctdrceciv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lctdrceciv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lctdrceciv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lctdrceciv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lctdrceciv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lctdrceciv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lctdrceciv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lctdrceciv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lctdrceciv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lctdrceciv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lctdrceciv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lctdrceciv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lctdrceciv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lctdrceciv .gt_left {\n  text-align: left;\n}\n\n#lctdrceciv .gt_center {\n  text-align: center;\n}\n\n#lctdrceciv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lctdrceciv .gt_font_normal {\n  font-weight: normal;\n}\n\n#lctdrceciv .gt_font_bold {\n  font-weight: bold;\n}\n\n#lctdrceciv .gt_font_italic {\n  font-style: italic;\n}\n\n#lctdrceciv .gt_super {\n  font-size: 65%;\n}\n\n#lctdrceciv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lctdrceciv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lctdrceciv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lctdrceciv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lctdrceciv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lctdrceciv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lctdrceciv .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"token\">token</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"next token\">next token</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"math\">math</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"token\" class=\"gt_row gt_left\">Call</td>\n<td headers=\"next token\" class=\"gt_row gt_left\">me</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1</td>\n<td headers=\"math\" class=\"gt_row gt_left\"><div data-qmd=\"$C(w_1w_2) = 1$\"><div class='gt_from_md'><p>\\(C(w_1w_2) = 1\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_left\">me</td>\n<td headers=\"next token\" class=\"gt_row gt_left\">Ishmael</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1</td>\n<td headers=\"math\" class=\"gt_row gt_left\"><div data-qmd=\"$C(w_2w_3) = 1$\"><div class='gt_from_md'><p>\\(C(w_2w_3) = 1\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_left\">Ishmael</td>\n<td headers=\"next token\" class=\"gt_row gt_left\">.</td>\n<td headers=\"n\" class=\"gt_row gt_center\">3</td>\n<td headers=\"math\" class=\"gt_row gt_left\"><div data-qmd=\"$C(w_3w_4) = 3$\"><div class='gt_from_md'><p>\\(C(w_3w_4) = 3\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_left\">.</td>\n<td headers=\"next token\" class=\"gt_row gt_left\">Some</td>\n<td headers=\"n\" class=\"gt_row gt_center\">27</td>\n<td headers=\"math\" class=\"gt_row gt_left\"><div data-qmd=\"$C(w_4w_5) = 27$\"><div class='gt_from_md'><p>\\(C(w_4w_5) = 27\\)</p>\n</div></div></td></tr>\n    <tr><td headers=\"token\" class=\"gt_row gt_left\">Some</td>\n<td headers=\"next token\" class=\"gt_row gt_left\">years</td>\n<td headers=\"n\" class=\"gt_row gt_center\">1</td>\n<td headers=\"math\" class=\"gt_row gt_left\"><div data-qmd=\"$C(w_5w_6) = 1$\"><div class='gt_from_md'><p>\\(C(w_5w_6) = 1\\)</p>\n</div></div></td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n::: callout-note\n## Math Notation\n\n$C(w_1w_2)$\n\n:   The count of times the sequence $w_1w_2$ occured.\n\n$C(w_iw_{i+1})$\n\n:   The count of times an arbitrary 2 word sequence appeared\n\n$C(w_{i-1}w_i)$\n\n:   Same as before, but with emphasis on the second word.\n:::\n\n#### Probabilities\n\n::: callout-note\n## Math Notation\n\n$P(w_1)$\n\n:   The *probability* of the first word\n\n$P(w_i)$\n\n:   The probability of an arbitrary word\n\n$P(w_2|w_1)$\n\n:   The probability that we'll get word 2 coming after word 1\n\n$P(w_i|w_{i-1})$\n\n:   The probability we'll get any arbitrary word coming after the word before.\n:::\n\n## Language Prediction\n\nWhen we are perceiving language, we are constantly and in real-time making predictions about what we are about to hear next. While we're going to be talking about this in terms of predicting the next word, It's been shown that we do this even partway through a word [@allopenna1998].\n\nSo, let's say I spoke this much of a sentence to you:\n\n> I could tell he was angry from the tone of his\\_\\_\\_\n\nAnd then a sudden noise obscured the final word, and you only caught part of it. Which of the following three words was I *probably* trying to say?\n\na.  boys\nb.  choice\nc.  voice\n\nYour ability to guess which word it was is based on your i) experience with English turns of phrase and ii) the information in the context.\n\nOne goal of Language Models is to assign probabilities across the vocabulary for what the next word will be, and hopefully assign higher probabilities to the \"correct\" answer than the \"incorrect\" answer. Applications for this kind of prediction range from speech-to-text (which could suffer from a very similar circumstance as the fictional one above) to autocomplete or spellcheck.\n\n## Using context (ngrams)\n\nIn the example sentence above, one way we could go about trying to predict which word is most likely is to count up how many times the phrase \"I could tell he was angry from the tone of his\\_\\_\\_\" is finished by the candidate words. Here's a table of google hits for the three possible phrases, as well as all hits for just the context phrase.\n\n|   \"I could tell he was angry from the tone of his\" | count |\n|---------------------------------------------------:|------:|\n|                                               boys |     0 |\n|                                             choice |     0 |\n|                                              voice |     3 |\n| *\"I could tell he was angry from the tone of his\"* |     3 |\n\nWe're going to start diving into mathematical formulas now (fortunately the numbers are easy right now).\n\nTo represent the count of a word or string of words in a corpus. We'll use $C(\\text{word})$. So given the table above we have\n\n|                                                                   |     |     |\n|:------------------------------------------------------------------|:---:|:----|\n| $C(\\text{I could tell he was angry from the tone of his})$        |  =  | 3   |\n| $C(\\text{I could tell he was angry from the tone of his boys})$   |  =  | 0   |\n| $C(\\text{I could tell he was angry from the tone of his choice})$ |  =  | 0   |\n| $C(\\text{I could tell he was angry from the tone of his voice})$  |  =  | 3   |\n\nTo describe the probability that the next word is \"choice\" given that we've already heard \"I could tell he was angry from the tone of his\", we'll use the notation $P(\\text{choice} | \\text{I could tell he was angry from the tone of his})$. To *calculate* that probability, we'll divide the total count of the whole phrase by the count of the preceding context.\n\n$$\nP(\\text{choice} | \\text{I could tell he was angry from the tone of his}) = \\frac{C(\\text{I could tell he was angry by the tone of his choice})}{C(\\text{I could tell he was angry by the tone of his})} = \\frac{0}{3} = 0\n$$\n\nOr, more generally:\n\n$$\nP(w_i|w_{i-n}\\dots w_{i-1}) = \\frac{w_{i-n}\\dots w_i}{w_{i-n}\\dots w_{i-1}}\n$$\n\nIn fact, we can estimate the probability of an entire sentence with the *Probability Chain Rule*. The probability of a sequence of events like $P(X_1X_2X_3)$ can be estimated by multiplying out their conditional probabilities like so:\n\n$$\nP(X_1X_2X_3) = P(X_1)P(X_2|X_1)P(X_3|X_1X_2)\n$$\n\nOr, to use a phrase as an example:[^2]\n\n[^2]: Credit here to Kyle Gorman for introducing me to this example.\n\n$$\nP(\\text{du hast mich gefragt})=P(\\text{du})P(\\text{hast}|\\text{du})P(\\text{mich}|\\text{du hast})P(\\text{gefragt}|\\text{du hast mich})\n$$\n\n## Data Sparsity\n\nThe problem we face is that, even with the whole internet to search, very long phrases like *\"I could tell he was angry by the tone of his\"* are relatively rare!\n\nIf we look at *Moby Dick*, using a standard tokenizer (more on that later) we wind up with 255,958 words in total. But not every word is equally likely.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell layout-align=\"center\" crop='true'}\n::: {.cell-output-display}\n![Rank and Frequency of single words in Moby Dick](04_ngrams_files/figure-html/unnamed-chunk-24-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nAnd as the size of the ngrams increases, the sparsity gets worse.\n\n\n::: {.cell layout-align=\"center\" crop='true'}\n::: {.cell-output-display}\n![Rank and Frequency of 2-grams through 5-grams in Moby Dick](04_ngrams_files/figure-html/unnamed-chunk-28-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\nA \"Hapax Legomenon\" is a word or phrase that occurs just once in a corpus. If we look at the 2-grams through 5-grams in Moby Dick and make a plot of what proportion of tokens are hapax legomena, we can see that almost *all* 5grams appear just once.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![The proportion of all tokens which are hapax legomena ](04_ngrams_files/figure-html/unnamed-chunk-29-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### The *problem* with data sparsity\n\nLet's say we got the following sequence of 4 words, and I wanted to predict the 5th\n\n|       |       |       |          |       |\n|-------|-------|-------|----------|-------|\n| a     | man   | is    | elevated | ?     |\n| $w_1$ | $w_2$ | $w_3$ | $w_4$    | $w_5$ |\n\nSo, for each word type, I want to know\n\n$$\nP(w_i | \\text{a man is elevated})\n$$\n\nWe know this is going to be calculated with this formula:\n\n$$\n\\frac{C(\\text{a man is elevated }w_i)}{C(\\text{a man is elevated)}}\n$$\n\nFrom the 4gram counts, I'll grab a table of the frequency of \"a man is elevated\".\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"qskgcgxvne\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#qskgcgxvne table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#qskgcgxvne thead, #qskgcgxvne tbody, #qskgcgxvne tfoot, #qskgcgxvne tr, #qskgcgxvne td, #qskgcgxvne th {\n  border-style: none;\n}\n\n#qskgcgxvne p {\n  margin: 0;\n  padding: 0;\n}\n\n#qskgcgxvne .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#qskgcgxvne .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#qskgcgxvne .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#qskgcgxvne .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#qskgcgxvne .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#qskgcgxvne .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#qskgcgxvne .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#qskgcgxvne .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#qskgcgxvne .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#qskgcgxvne .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#qskgcgxvne .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#qskgcgxvne .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#qskgcgxvne .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#qskgcgxvne .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#qskgcgxvne .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qskgcgxvne .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#qskgcgxvne .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#qskgcgxvne .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#qskgcgxvne .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qskgcgxvne .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#qskgcgxvne .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qskgcgxvne .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#qskgcgxvne .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qskgcgxvne .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qskgcgxvne .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qskgcgxvne .gt_left {\n  text-align: left;\n}\n\n#qskgcgxvne .gt_center {\n  text-align: center;\n}\n\n#qskgcgxvne .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#qskgcgxvne .gt_font_normal {\n  font-weight: normal;\n}\n\n#qskgcgxvne .gt_font_bold {\n  font-weight: bold;\n}\n\n#qskgcgxvne .gt_font_italic {\n  font-style: italic;\n}\n\n#qskgcgxvne .gt_super {\n  font-size: 65%;\n}\n\n#qskgcgxvne .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#qskgcgxvne .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#qskgcgxvne .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#qskgcgxvne .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#qskgcgxvne .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#qskgcgxvne .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#qskgcgxvne .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"4gram\">4gram</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq\">freq</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"4gram\" class=\"gt_row gt_left\">a man is elevated </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nIt looks like *\"a man is elevated\"* appeared just once, so it follows that the 5gram that starts with *\"a man is elevated\"* also appears just once.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"cwoagomaxr\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#cwoagomaxr table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#cwoagomaxr thead, #cwoagomaxr tbody, #cwoagomaxr tfoot, #cwoagomaxr tr, #cwoagomaxr td, #cwoagomaxr th {\n  border-style: none;\n}\n\n#cwoagomaxr p {\n  margin: 0;\n  padding: 0;\n}\n\n#cwoagomaxr .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#cwoagomaxr .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#cwoagomaxr .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#cwoagomaxr .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#cwoagomaxr .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#cwoagomaxr .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#cwoagomaxr .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#cwoagomaxr .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#cwoagomaxr .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#cwoagomaxr .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#cwoagomaxr .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#cwoagomaxr .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#cwoagomaxr .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#cwoagomaxr .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#cwoagomaxr .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cwoagomaxr .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#cwoagomaxr .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#cwoagomaxr .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#cwoagomaxr .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cwoagomaxr .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#cwoagomaxr .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cwoagomaxr .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#cwoagomaxr .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cwoagomaxr .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cwoagomaxr .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cwoagomaxr .gt_left {\n  text-align: left;\n}\n\n#cwoagomaxr .gt_center {\n  text-align: center;\n}\n\n#cwoagomaxr .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#cwoagomaxr .gt_font_normal {\n  font-weight: normal;\n}\n\n#cwoagomaxr .gt_font_bold {\n  font-weight: bold;\n}\n\n#cwoagomaxr .gt_font_italic {\n  font-style: italic;\n}\n\n#cwoagomaxr .gt_super {\n  font-size: 65%;\n}\n\n#cwoagomaxr .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#cwoagomaxr .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#cwoagomaxr .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#cwoagomaxr .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#cwoagomaxr .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#cwoagomaxr .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#cwoagomaxr .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"5gram\">5gram</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq\">freq</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"5gram\" class=\"gt_row gt_left\">a man is elevated in </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nIf we wanted to compare the probabilities of the words *in* and *to* in this context. we'd wind up with the following results.\n\n$$\nP(\\text{in} | \\text{a man is elevated}) = \\frac{C(\\text{a man is elevated in})}{C(\\text{a man is elevated)}} = \\frac{1}{1} = 1\n$$\n\n$$\nP(\\text{to} | \\text{a man is elevated}) = \\frac{C(\\text{a man is elevated to})}{C(\\text{a man is elevated)}} = \\frac{0}{1} = 0\n$$\n\nAccording to this 5gram model trained on Moby Dick, there's a *0% chance* that the next word could be *\"to\"*.\n\nIs that really reasonable?\n\n### Approximating with ngrams\n\nInstead of using long ngrams, we can try approximating with shorter ngrams (known as the Markov Assumption).\n\n$$\nP(\\text{in} | \\text{a man is elevated}) \\approx P(\\text{in} | \\text{elevated})\n$$\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"gxlqeekbve\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gxlqeekbve table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gxlqeekbve thead, #gxlqeekbve tbody, #gxlqeekbve tfoot, #gxlqeekbve tr, #gxlqeekbve td, #gxlqeekbve th {\n  border-style: none;\n}\n\n#gxlqeekbve p {\n  margin: 0;\n  padding: 0;\n}\n\n#gxlqeekbve .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gxlqeekbve .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gxlqeekbve .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gxlqeekbve .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gxlqeekbve .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gxlqeekbve .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gxlqeekbve .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gxlqeekbve .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gxlqeekbve .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gxlqeekbve .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gxlqeekbve .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gxlqeekbve .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gxlqeekbve .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gxlqeekbve .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gxlqeekbve .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gxlqeekbve .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gxlqeekbve .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gxlqeekbve .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gxlqeekbve .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gxlqeekbve .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gxlqeekbve .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gxlqeekbve .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gxlqeekbve .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gxlqeekbve .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gxlqeekbve .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gxlqeekbve .gt_left {\n  text-align: left;\n}\n\n#gxlqeekbve .gt_center {\n  text-align: center;\n}\n\n#gxlqeekbve .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gxlqeekbve .gt_font_normal {\n  font-weight: normal;\n}\n\n#gxlqeekbve .gt_font_bold {\n  font-weight: bold;\n}\n\n#gxlqeekbve .gt_font_italic {\n  font-style: italic;\n}\n\n#gxlqeekbve .gt_super {\n  font-size: 65%;\n}\n\n#gxlqeekbve .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gxlqeekbve .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gxlqeekbve .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gxlqeekbve .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gxlqeekbve .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gxlqeekbve .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gxlqeekbve .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bigrams\">bigrams</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq\">freq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\\(P(w_i)\\)\">\\(P(w_i)\\)</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated above </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">2</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.18</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated , </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">2</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.18</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated out </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">2</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.18</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated in </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.09</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated quarter-deck </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.09</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated hump </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.09</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated part </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.09</td></tr>\n    <tr><td headers=\"bigrams\" class=\"gt_row gt_left\">elevated open-work </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.09</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Calculating probabilities\n\nRemember this chain rule?\n\n$$\nP(\\text{du hast mich gefragt})=P(\\text{du})P(\\text{hast}|\\text{du})P(\\text{mich}|\\text{du hast})P(\\text{gefragt}|\\text{du hast mich})\n$$\n\nWe'd simplify this, like so:\n\n$$\nP(\\text{du hast mich gefragt}) = P({\\text{du} | \\text{\\#}})P(\\text{hast} | \\text{du})P(\\text{mich} | \\text{hast})P(\\text{gefragt}|\\text{mich})\n$$\n\n### Log Probabilities\n\nThere's an additional complication about how we represent probabilities. Let's build a very probable 10 word string starting with *\"The\".* I'll just grab the most frequent $w_i$ that comes after $w_{i-1}$.[^3]\n\n[^3]: If we went longer than 10, we actually get $\\text{The Pequod's a little}\\overline{\\text{, and the whale}}$\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"joltrdsqgs\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#joltrdsqgs table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#joltrdsqgs thead, #joltrdsqgs tbody, #joltrdsqgs tfoot, #joltrdsqgs tr, #joltrdsqgs td, #joltrdsqgs th {\n  border-style: none;\n}\n\n#joltrdsqgs p {\n  margin: 0;\n  padding: 0;\n}\n\n#joltrdsqgs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#joltrdsqgs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#joltrdsqgs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#joltrdsqgs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#joltrdsqgs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#joltrdsqgs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#joltrdsqgs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#joltrdsqgs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#joltrdsqgs .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#joltrdsqgs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#joltrdsqgs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#joltrdsqgs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#joltrdsqgs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#joltrdsqgs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#joltrdsqgs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#joltrdsqgs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#joltrdsqgs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#joltrdsqgs .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#joltrdsqgs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#joltrdsqgs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#joltrdsqgs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#joltrdsqgs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#joltrdsqgs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#joltrdsqgs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#joltrdsqgs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#joltrdsqgs .gt_left {\n  text-align: left;\n}\n\n#joltrdsqgs .gt_center {\n  text-align: center;\n}\n\n#joltrdsqgs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#joltrdsqgs .gt_font_normal {\n  font-weight: normal;\n}\n\n#joltrdsqgs .gt_font_bold {\n  font-weight: bold;\n}\n\n#joltrdsqgs .gt_font_italic {\n  font-style: italic;\n}\n\n#joltrdsqgs .gt_super {\n  font-size: 65%;\n}\n\n#joltrdsqgs .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#joltrdsqgs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#joltrdsqgs .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#joltrdsqgs .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#joltrdsqgs .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#joltrdsqgs .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#joltrdsqgs .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bigram\">bigram</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq\">freq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\\(P(w_i | w_{i-1})\\)\">\\(P(w_i | w_{i-1})\\)</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">The Pequod </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">15</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">Pequod  </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">49</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.28</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\"> s </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1,784</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.64</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">s a </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">73</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">a little </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">105</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">little , </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">11</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">, and </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">2,630</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.14</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">and the </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">361</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.06</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">the whale </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">325</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">whale , </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">173</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.22</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"> The Pequods a little, and the whale,\"\n```\n\n\n:::\n:::\n\n\nWe can calculate the cumulative probability of each next substring of the sentence.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"obnwcrgztw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#obnwcrgztw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#obnwcrgztw thead, #obnwcrgztw tbody, #obnwcrgztw tfoot, #obnwcrgztw tr, #obnwcrgztw td, #obnwcrgztw th {\n  border-style: none;\n}\n\n#obnwcrgztw p {\n  margin: 0;\n  padding: 0;\n}\n\n#obnwcrgztw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#obnwcrgztw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#obnwcrgztw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#obnwcrgztw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#obnwcrgztw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#obnwcrgztw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#obnwcrgztw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#obnwcrgztw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#obnwcrgztw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#obnwcrgztw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#obnwcrgztw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#obnwcrgztw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#obnwcrgztw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#obnwcrgztw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#obnwcrgztw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#obnwcrgztw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#obnwcrgztw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#obnwcrgztw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#obnwcrgztw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#obnwcrgztw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#obnwcrgztw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#obnwcrgztw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#obnwcrgztw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#obnwcrgztw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#obnwcrgztw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#obnwcrgztw .gt_left {\n  text-align: left;\n}\n\n#obnwcrgztw .gt_center {\n  text-align: center;\n}\n\n#obnwcrgztw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#obnwcrgztw .gt_font_normal {\n  font-weight: normal;\n}\n\n#obnwcrgztw .gt_font_bold {\n  font-weight: bold;\n}\n\n#obnwcrgztw .gt_font_italic {\n  font-style: italic;\n}\n\n#obnwcrgztw .gt_super {\n  font-size: 65%;\n}\n\n#obnwcrgztw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#obnwcrgztw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#obnwcrgztw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#obnwcrgztw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#obnwcrgztw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#obnwcrgztw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#obnwcrgztw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bigram\">bigram</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"freq\">freq</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\\(P(w_i | w_{i-1})\\)\">\\(P(w_i | w_{i-1})\\)</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"\\(P(w_{i-n}\\dots w_i)\\)\">\\(P(w_{i-n}\\dots w_i)\\)</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">The Pequod </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">15</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0216763006</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">Pequod  </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">49</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.28</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0060693642</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\"> s </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">1,784</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.64</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0038809124</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">s a </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">73</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0001588042</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">a little </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">105</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000036997</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">little , </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">11</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000001648</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">, and </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">2,630</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.14</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000000226</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">and the </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">361</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.06</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000000014</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">the whale </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">325</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000000000</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">whale , </td>\n<td headers=\"freq\" class=\"gt_row gt_right\">173</td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.22</td>\n<td headers=\"total_prob\" class=\"gt_row gt_right\">0.0000000000</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nI artificially clamped the number of decimal points that would show in the final column to 10, but because of the way computers represent decimal points, they *also* have a lower limit they can get to.\n\nTo avoid things getting weird with decimals that are too small, these probabilities will often be represented as *log* probabilities.\n\nIf you don't remember how logarithms work, that's ok. There's just a few useful properties to remember.\n\n$$\n\\log(x)  \\left\\{ \\begin{array}{c} > 0; x>1\\\\=0; x =1\\\\<0; x<1 \\end{array} \\right\\}\n$$\n\n$$\n\\log(0) = -\\infty\n$$\n\n$$\n\\log(x  y) = \\log(x) + \\log(y)\n$$\n\n$$\n\\log(\\frac{x}{y}) = \\log(x) - \\log(y)\n$$\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"cggdekxfcu\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#cggdekxfcu table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#cggdekxfcu thead, #cggdekxfcu tbody, #cggdekxfcu tfoot, #cggdekxfcu tr, #cggdekxfcu td, #cggdekxfcu th {\n  border-style: none;\n}\n\n#cggdekxfcu p {\n  margin: 0;\n  padding: 0;\n}\n\n#cggdekxfcu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#cggdekxfcu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#cggdekxfcu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#cggdekxfcu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#cggdekxfcu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#cggdekxfcu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#cggdekxfcu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#cggdekxfcu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#cggdekxfcu .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#cggdekxfcu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#cggdekxfcu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#cggdekxfcu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#cggdekxfcu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#cggdekxfcu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#cggdekxfcu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cggdekxfcu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#cggdekxfcu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#cggdekxfcu .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#cggdekxfcu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cggdekxfcu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#cggdekxfcu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cggdekxfcu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#cggdekxfcu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cggdekxfcu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cggdekxfcu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cggdekxfcu .gt_left {\n  text-align: left;\n}\n\n#cggdekxfcu .gt_center {\n  text-align: center;\n}\n\n#cggdekxfcu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#cggdekxfcu .gt_font_normal {\n  font-weight: normal;\n}\n\n#cggdekxfcu .gt_font_bold {\n  font-weight: bold;\n}\n\n#cggdekxfcu .gt_font_italic {\n  font-style: italic;\n}\n\n#cggdekxfcu .gt_super {\n  font-size: 65%;\n}\n\n#cggdekxfcu .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#cggdekxfcu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#cggdekxfcu .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#cggdekxfcu .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#cggdekxfcu .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#cggdekxfcu .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#cggdekxfcu .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bigram\">bigram</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"probability\">probability</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"log(prob)\">log(prob)</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total log(prob)\">total log(prob)</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">The Pequod </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">3.83</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">3.83</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">Pequod  </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.28</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">1.27</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">5.10</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\"> s </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.64</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">0.45</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">5.55</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">s a </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">3.20</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">8.75</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">a little </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">3.76</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">12.51</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">little , </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.04</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">3.11</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">15.62</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">, and </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.14</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">1.99</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">17.61</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">and the </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.06</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">2.81</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">20.42</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">the whale </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.02</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">3.74</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">24.16</td></tr>\n    <tr><td headers=\"ngrams\" class=\"gt_row gt_left\">whale , </td>\n<td headers=\"prob\" class=\"gt_row gt_right\">0.22</td>\n<td headers=\"log_prob\" class=\"gt_row gt_right\">1.49</td>\n<td headers=\"total_lp\" class=\"gt_row gt_right\">25.66</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n",
    "supporting": [
      "04_ngrams_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}